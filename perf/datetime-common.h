#include <assert.h>
#include <stdint.h>
#include <string.h>
#include <benchmark/benchmark.h>

#include "dt.h"
#include "datetime.h"

#ifdef __cplusplus
extern "C" {
#endif

static const char sample[] = "2012-12-24T15:30Z";

#define S(s)               \
	{ s, sizeof(s) - 1 }

static struct
{
	const char *sz;
	size_t len;
} tests[] = {
    S("2012-12-24 15:30Z"),
    S("2012-12-24 15:30z"),
    S("2012-12-24 15:30"),
    S("2012-12-24 16:30+01:00"),
    S("2012-12-24 16:30+0100"),
    S("2012-12-24 16:30+01"),
    S("2012-12-24 14:30-01:00"),
    S("2012-12-24 14:30-0100"),
    S("2012-12-24 14:30-01"),
    S("2012-12-24 15:30:00Z"),
    S("2012-12-24 15:30:00z"),
    S("2012-12-24 15:30:00"),
    S("2012-12-24 16:30:00+01:00"),
    S("2012-12-24 16:30:00+0100"),
    S("2012-12-24 14:30:00-01:00"),
    S("2012-12-24 14:30:00-0100"),
    S("2012-12-24 15:30:00.123456Z"),
    S("2012-12-24 15:30:00.123456z"),
    S("2012-12-24 15:30:00.123456"),
    S("2012-12-24 16:30:00.123456+01:00"),
    S("2012-12-24 16:30:00.123456+01"),
    S("2012-12-24 14:30:00.123456-01:00"),
    S("2012-12-24 14:30:00.123456-01"),
    S("2012-12-24t15:30Z"),
    S("2012-12-24t15:30z"),
    S("2012-12-24t15:30"),
    S("2012-12-24t16:30+01:00"),
    S("2012-12-24t16:30+0100"),
    S("2012-12-24t14:30-01:00"),
    S("2012-12-24t14:30-0100"),
    S("2012-12-24t15:30:00Z"),
    S("2012-12-24t15:30:00z"),
    S("2012-12-24t15:30:00"),
    S("2012-12-24t16:30:00+01:00"),
    S("2012-12-24t16:30:00+0100"),
    S("2012-12-24t14:30:00-01:00"),
    S("2012-12-24t14:30:00-0100"),
    S("2012-12-24t15:30:00.123456Z"),
    S("2012-12-24t15:30:00.123456z"),
    S("2012-12-24t16:30:00.123456+01:00"),
    S("2012-12-24t14:30:00.123456-01:00"),
    S("2012-12-24 16:30 +01:00"),
    S("2012-12-24 14:30 -01:00"),
    S("2012-12-24 15:30 UTC"),
    S("2012-12-24 16:30 UTC+1"),
    S("2012-12-24 16:30 UTC+01"),
    S("2012-12-24 16:30 UTC+0100"),
    S("2012-12-24 16:30 UTC+01:00"),
    S("2012-12-24 14:30 UTC-1"),
    S("2012-12-24 14:30 UTC-01"),
    S("2012-12-24 14:30 UTC-01:00"),
    S("2012-12-24 14:30 UTC-0100"),
    S("2012-12-24 15:30 GMT"),
    S("2012-12-24 16:30 GMT+1"),
    S("2012-12-24 16:30 GMT+01"),
    S("2012-12-24 16:30 GMT+0100"),
    S("2012-12-24 16:30 GMT+01:00"),
    S("2012-12-24 14:30 GMT-1"),
    S("2012-12-24 14:30 GMT-01"),
    S("2012-12-24 14:30 GMT-01:00"),
    S("2012-12-24 14:30 GMT-0100"),
    S("2012-12-24 14:30 -01:00"),
    S("2012-12-24 16:30:00 +01:00"),
    S("2012-12-24 14:30:00 -01:00"),
    S("2012-12-24 16:30:00.123456 +01:00"),
    S("2012-12-24 14:30:00.123456 -01:00"),
    S("2012-12-24 15:30:00.123456 -00:00"),
    S("20121224T1630+01:00"),
    S("2012-12-24T1630+01:00"),
    S("20121224T16:30+01"),
    S("20121224T16:30 +01"),
};
#undef S

#define DIM(a) (sizeof(a) / sizeof(a[0]))

int
parse_datetime(const char *str, size_t len, int64_t *sp, int32_t *np,
	       int32_t *op);

#ifdef __cplusplus
}
#endif
